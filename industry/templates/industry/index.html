{% extends "industry/layouts/base_layout.html" %}
{% load static %}
{% load gregorian_to_jalali %}
{% block title %}پروژه ها{% endblock %}

{% block style %}
    <link rel="stylesheet"
          href="{% static 'libs/TempusDominusBootstrap4/5.0.0_alpha14/tempusdominus-bootstrap-4.min.css' %}"/>
{% endblock %}

{% block dialog %}
    {% comment %} {% include 'industry/layouts/project_details.html' %} {% endcomment %}
    {% include 'industry/layouts/vote_dialog.html' %}
{% endblock %}
{% block modals %}
    {% if user.industryuser.status == 'signed_up' %}
        {% include 'industry/layouts/select_usage.html' %}
        {% include 'industry/layouts/initial_information.html' %}
    {% endif %}
    {% include 'industry/layouts/show_project.html' %}
    {% include 'industry/layouts/expertResume.html' %}
    {% include 'industry/layouts/project_setting.html' %}
{% endblock %}

{% block name %}{{ request.user.industryuser.profile }}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-12 text-right">
            <h3 class="h3 p-top-15 border-bottom">پروژه ها</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 text-right">
            {% for project in projects %}
                {% if project.status == 0 %}
                    <div class="card box flow-root-display w-100">
                        <div class="box-header">
                            <h6>{{ project.project_form.persian_title }}</h6>
                            <div class="box-option-container">
                                <span class="check-status"></span>
                            </div>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-6">

                                </div>
                                <div class="col-6">
                                    <button class="preview-project default-btn" type="button"
                                            id="{{ project.id }}" data-toggle="modal" data-target="#showProject">
                                        مشاهده
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {#                    <div class="col-lg-6 col-md-6">#}
                    {#                        <div class="card project-card text-right">#}
                    {#                            <h6> {{ project.project_form.persian_title }}</h6>#}
                    {#                            <div class="employer"><i class="far fa-envelope"></i> پیام ها</div>#}
                    {#                            <button class="preview-project default-btn show-btn show-project" type="button"#}
                    {#                                    id="{{ project.id }}">مشاهده#}
                    {#                            </button>#}
                    {#                            <div class="timetable"><i></i> در حال بررسی!</div>#}
                    {#                            <div class="check-circle"><i class="fas fa-spinner fa-pulse fa-lg"></i></div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                {% elif project.status == 1 %}
                    <div class="card box flow-root-display w-100">
                        <div class="box-header">
                            <h6>{{ project.project_form.persian_title }}</h6>
                            <div class="box-option-container">

                                <div class="notification">
                                    <i class="far fa-comment-alt center-abs"></i>
                                    {% if project.industryUnseenCommentCount %}
                                        <span class="unseen-comments">{{ project.industryUnseenCommentCount }}</span>
                                    {% endif %}
                                </div>
                                <span class="active-status"><i class="fas fa-spinner fc-white center-abs"></i></span>
                                <div class="project-setting" data-toggle="modal" data-target="#projectSetting">
                                    <i class="fas fa-cog"></i>
                                </div>
                            </div>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-6">

                                </div>
                                <div class="col-6">
                                    <button class="preview-project default-btn" type="button"
                                            id="{{ project.id }}" data-toggle="modal" data-target="#showProject">
                                        مشاهده
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {#                    <div class="col-lg-6 col-md-6">#}
                    {#                        <div class="card project-card text-right">#}
                    {#                            <h6> {{ project.project_form.persian_title }}</h6>#}
                    {##}
                    {#                            {% if project.industryUnseenCommentCount != 0 %}#}
                    {#                                <div class="employer">#}
                    {#                                    <i class="far fa-envelope"></i>#}
                    {#                                    پیام ها#}
                    {#                                    <span class="unseen-msg">{{ project.industryUnseenCommentCount }}</span>#}
                    {#                                </div>#}
                    {#                            {% else %}#}
                    {#                                <div class="employer"><i class="far fa-envelope"></i> پیام ها</div>#}
                    {#                            {% endif %}#}
                    {#                            <button class="preview-project default-btn show-btn show-project" type="button"#}
                    {#                                    id="{{ project.id }}">مشاهده#}
                    {#                            </button>#}
                    {#                            <div class="timetable"><i class="fas fa-hourglass-half"></i> {{ project.time_left }}#}
                    {#                            </div>#}
                    {#                            <div class="active-circle"></div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                {% elif project.status == 2 %}
                    <div class="card box flow-root-display w-100">
                        <div class="box-header">
                            <h6>{{ project.project_form.persian_title }}</h6>
                            <div class="box-option-container">
                                <div class="notification">
                                    <i class="far fa-comment-alt center-abs"></i>
                                    {% if project.industryUnseenCommentCount %}
                                        <span class="unseen-comments">{{ project.industryUnseenCommentCount }}</span>
                                    {% endif %}
                                </div>
                                <span class="active-status"></span>
                                <div class="project-setting" data-toggle="modal" data-target="#projectSetting">
                                    <i class="fas fa-cog"></i>
                                </div>
                            </div>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-md-6 col-8">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="text-center">
                                                <div class="label">مهلت</div>
                                                <div class="value">
                                                    <span>{{ project.time_left }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="text-center">
                                                <div class="label">استاد</div>
                                                <div class="value">
                                                    {% if project.expert_accepted %}
                                                        <span>{{ project.firstExpert.expertform }}</span>
                                                    {% else %}
                                                        <span>نامشخص</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-4">
                                    <a href="{% url 'industry:show_active_project' code=project.code %}">
                                        <button class="default-btn" type="button" id="{{ project.id }}">
                                            مشاهده
                                        </button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {#                    <div class="col-lg-6 col-md-6">#}
                    {#                        <div class="card project-card text-right">#}
                    {#                            <h6> {{ project.project_form.persian_title }}</h6>#}
                    {##}
                    {#                            {% if project.industryUnseenCommentCount != 0 %}#}
                    {#                                <div class="employer">#}
                    {#                                    <i class="far fa-envelope"></i>#}
                    {#                                    پیام ها#}
                    {#                                    <span class="unseen-msg">{{ project.industryUnseenCommentCount }}</span>#}
                    {#                                </div>#}
                    {#                            {% else %}#}
                    {#                                <div class="employer"><i class="far fa-envelope"></i> پیام ها</div>#}
                    {#                            {% endif %}#}
                    {##}
                    {#                            {% if project.expert_accepted %}#}
                    {#                                <div class="employer">#}
                    {#                                    <i class="fas fa-user-tie"></i>#}
                    {#                                    استاد#}
                    {#                                    {{ project.expert_accepted.expertform }}#}
                    {#                                </div>#}
                    {#                            {% endif %}#}
                    {#                            <button class="preview-project default-btn show-btn show-project" type="button"#}
                    {#                                    id="{{ project.id }}">مشاهده#}
                    {#                            </button>#}
                    {#                            <div class="timetable"><i class="fas fa-hourglass-half"></i> {{ project.time_left }}#}
                    {#                            </div>#}
                    {#                            <div class="active-circle"></div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                {% elif project.status == 3 %}
                    <div class="card box flow-root-display w-100">
                        <div class="box-header">
                            <h6>{{ project.project_form.persian_title }}</h6>
                            <div class="box-option-container">
                                <div class="notification">
                                    <i class="far fa-comment-alt center-abs"></i>
                                    {% if project.industryUnseenCommentCount %}
                                        <span class="unseen-comments">{{ project.industryUnseenCommentCount }}</span>
                                    {% endif %}
                                </div>
                                <span class="reject-status"></span>
                            </div>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-6">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="text-center">
                                                <div class="label">استاد</div>
                                                <div class="value">
                                                    {% if project.expert_accepted %}
                                                        <span>{{ project.expert_accepted.expertform }}</span>
                                                    {% else %}
                                                        <span>نامشخص</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6">

                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <button class="preview-project default-btn" type="button"
                                            id="{{ project.id }}" data-toggle="modal" data-target="#showProject">
                                        مشاهده
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {#                    <div class="col-lg-6 col-md-6">#}
                    {#                        <div class="card project-card text-right">#}
                    {#                                <div class="status-line refuse"></div>#}
                    {#                            <h6><i class="fas fa-file-alt"></i>#}
                    {#                                {{ project.project_form.persian_title }}</h6>#}
                    {#                            <div class="employer"><i class="far fa-envelope"></i> پیام ها</div>#}
                    {#                            {% if project.expert_accepted %}#}
                    {#                                <div class="employer">#}
                    {#                                    <i class="fas fa-user-tie"></i>#}
                    {#                                    استاد#}
                    {#                                    {{ project.expert_accepted.expertform }}#}
                    {#                                </div>#}
                    {#                            {% endif %}#}
                    {#                            <button class="preview-project default-btn show-btn show-project" type="button"#}
                    {#                                    id="{{ project.id }}">نمایش#}
                    {#                            </button>#}
                    {#                            <div class="timetable"><i></i> معلق!</div>#}
                    {#                            <div class="refuse-circle">#}
                    {#                                <i class="fas fa-ban fa-lg"></i>#}
                    {#                            </div>#}
                    {#                            <div class="bottom-line"></div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                {% elif project.status == 4 %}
                    <div class="card box flow-root-display w-100">
                        <div class="box-header">
                            <h6>{{ project.project_form.persian_title }}</h6>
                            <span class="complete-status">
                                <i class="fas fa-check center-abs fc-white"></i>
                            </span>
                            <div class="notification">
                                <i class="far fa-comment-alt center-abs"></i>
                                {% if project.industryUnseenCommentCount %}
                                    <span class="unseen-comments">{{ project.industryUnseenCommentCount }}</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="box-body">
                            <div class="row">
                                <div class="col-6">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="text-center">
                                                <div class="label">مهلت</div>
                                                <div class="value">
                                                    <span>{{ project.time_left }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="text-center">
                                                <div class="label">استاد</div>
                                                <div class="value">
                                                    {% if project.expert_accepted %}
                                                        <span>{{ project.expert_accepted.expertform }}</span>
                                                    {% else %}
                                                        <span>نامشخص</span>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <button class="preview-project default-btn" type="button"
                                            id="{{ project.id }}" data-toggle="modal" data-target="#showProject">
                                        مشاهده
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    {#                    <div class="col-lg-6 col-md-6">#}
                    {#                        <div class="card project-card text-right">#}
                    {#                            <h6><i class="fas fa-file-alt"></i>#}
                    {#                                {{ project.project_form.persian_title }}</h6>#}
                    {#                            <div class="employer"><i class="far fa-envelope"></i> پیام ها</div>#}
                    {#                            {% if project.expert_accepted %}#}
                    {#                                <div class="employer">#}
                    {#                                    <i class="fas fa-user-tie"></i>#}
                    {#                                    استاد#}
                    {#                                    {{ project.expert_accepted.expertform }}#}
                    {#                                </div>#}
                    {#                            {% endif %}#}
                    {#                            <button class="preview-project default-btn show-btn" type="button"#}
                    {#                                    id="{{ project.id }}">نمایش#}
                    {#                            </button>#}
                    {#                            <div class="timetable"><i class="fas fa-check-double"></i> تکمیل شد</div>#}
                    {#                            <div class="default-circle"><i class="fas fa-check-circle fa-lg"></i></div>#}
                    {#                        </div>#}
                    {#                    </div>#}
                {% endif %}
            {% empty %}
                <div class="no-project-container">
                    <div class="no-project">
                        <img src="{% static 'img/no_project.svg' %}" alt="logo" class="icon">
                        <h4>متاسفانه، هنوز پروژه ای ثبت نکرده اید!</h4>
                        <p>برای ثبت پروژه های خود و سپردن آن ها به متخصصین حوزه شما، لطفا از طریق</p>
                        <span>
                                <i class="fas fa-plus-circle"></i>
                                <span>ثبت پروژه جدید</span>
                            </span>
                        <p>در منوی سمت راست، اقدام نمایید.</p>
                    </div>
                </div>
            {% endfor %}
        </div>
        {#        <div class="col-lg-3"></div>#}
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'libs/FancyTree/2.30.2/fancytree-all-deps.min.js' %}"></script>
    {#    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>#}
    {#    <script src="{% static 'js/fa.js' %}"></script>#}
    {#    <script type="text/javascript"#}
    {#            src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.0-alpha14/js/tempusdominus-bootstrap-4.min.js"></script>#}
    {#    <script type="text/javascript">#}
    {#        $(function () {#}
    {#            $('#ApplicationDeadline').datetimepicker({#}
    {#                locale: 'fa',#}
    {#                format: 'YYYY/MM/DD',#}
    {#                debug: true,#}
    {#                showToday: true,#}
    {#            });#}
    {##}
    {##}
    {#            //$('#datetimepicker13').datetimepicker({#}
    {#            //    inline: true,#}
    {#            //    locale: 'fa',#}
    {#            //    format: 'L',#}
    {#            //    toolbarPlacement: 'bottom',#}
    {#            //    showToday: true,#}
    {#            //});#}
    {#        });#}
    {#    </script>#}
    <script type="text/javascript" src="{% static 'libs/PersianDate/1.1.0/persian-date.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'libs/PersianDatepicker/1.2.0/persian-datepicker.min.js' %}"></script>
{% endblock %}